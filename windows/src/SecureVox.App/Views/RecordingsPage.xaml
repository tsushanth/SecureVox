<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="SecureVox.App.Views.RecordingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SecureVox.App.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Loaded="Page_Loaded">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Header with search and actions -->
        <Grid Grid.Row="0" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBox
                x:Name="SearchBox"
                PlaceholderText="Search recordings..."
                Width="300"
                HorizontalAlignment="Left" />

            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="10">
                <Button x:Name="ImportButton" Click="ImportButton_Click">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE896;" FontSize="16" />
                        <TextBlock Text="Import" />
                    </StackPanel>
                </Button>

                <Button x:Name="RecordButton" Style="{StaticResource AccentButtonStyle}" Click="RecordButton_Click">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE720;" FontSize="16" />
                        <TextBlock Text="Record" />
                    </StackPanel>
                </Button>
            </StackPanel>
        </Grid>

        <!-- Content area -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="350" MinWidth="250" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Recordings list -->
            <Border
                Grid.Column="0"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8"
                Margin="0,0,10,0">
                <ListView
                    x:Name="RecordingsList"
                    SelectionMode="Single"
                    SelectionChanged="RecordingsList_SelectionChanged">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Grid Padding="12" ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <TextBlock
                                    Text="{Binding Title}"
                                    Style="{StaticResource BodyStrongTextBlockStyle}"
                                    TextTrimming="CharacterEllipsis" />

                                <TextBlock
                                    Grid.Row="1"
                                    Text="{Binding FormattedDate}"
                                    Style="{StaticResource CaptionTextBlockStyle}"
                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}" />

                                <TextBlock
                                    Grid.Column="1"
                                    Grid.RowSpan="2"
                                    Text="{Binding FormattedDuration}"
                                    VerticalAlignment="Center"
                                    Style="{StaticResource CaptionTextBlockStyle}"
                                    Foreground="{ThemeResource TextFillColorTertiaryBrush}" />
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Border>

            <!-- Recording detail -->
            <Border
                Grid.Column="1"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8"
                Padding="20">
                <Grid x:Name="DetailPanel" Visibility="Collapsed">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <!-- Recording header -->
                    <StackPanel Grid.Row="0" Spacing="8">
                        <TextBlock
                            x:Name="DetailTitle"
                            Style="{StaticResource TitleTextBlockStyle}" />
                        <StackPanel Orientation="Horizontal" Spacing="16">
                            <TextBlock
                                x:Name="DetailDuration"
                                Style="{StaticResource CaptionTextBlockStyle}"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                            <TextBlock
                                x:Name="DetailDate"
                                Style="{StaticResource CaptionTextBlockStyle}"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>
                    </StackPanel>

                    <!-- Transcript -->
                    <ScrollViewer Grid.Row="1" Margin="0,20,0,20">
                        <TextBlock
                            x:Name="TranscriptText"
                            TextWrapping="Wrap"
                            Style="{StaticResource BodyTextBlockStyle}" />
                    </ScrollViewer>

                    <!-- Actions -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="10">
                        <Button Content="Play" Click="PlayButton_Click" />
                        <Button Content="Export" Click="ExportButton_Click" />
                        <Button Content="Delete" Click="DeleteButton_Click" />
                    </StackPanel>
                </Grid>

                <!-- Empty state -->
                <StackPanel
                    x:Name="EmptyState"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    Spacing="16">
                    <FontIcon Glyph="&#xE720;" FontSize="48" Foreground="{ThemeResource TextFillColorTertiaryBrush}" />
                    <TextBlock
                        Text="Select a recording or start a new one"
                        Style="{StaticResource SubtitleTextBlockStyle}"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Page>
